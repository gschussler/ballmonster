(()=>{var e={479:function(e){var t;t=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach(function(e){s(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function y(e){return Array.isArray?Array.isArray(e):"[object Array]"===E(e)}var v=1/0;function g(e){return"string"==typeof e}function p(e){return"number"==typeof e}function m(e){return"object"===n(e)}function b(e){return null!=e}function A(e){return!e.trim().length}function E(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var k=Object.prototype.hasOwnProperty,C=function(){function e(t){var n=this;r(this,e),this._keys=[],this._keyMap={};var o=0;t.forEach(function(e){var t=S(e);n._keys.push(t),n._keyMap[t.id]=t,o+=t.weight}),this._keys.forEach(function(e){e.weight/=o})}return i(e,[{key:"get",value:function(e){return this._keyMap[e]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),e}();function S(e){var t=null,n=null,r=null,o=1,i=null;if(g(e)||y(e))r=e,t=L(e),n=w(e);else{if(!k.call(e,"name"))throw new Error("Missing ".concat("name"," property in key"));var s=e.name;if(r=s,k.call(e,"weight")&&(o=e.weight)<=0)throw new Error(function(e){return"Property 'weight' in key '".concat(e,"' must be a positive integer")}(s));t=L(s),n=w(s),i=e.getFn}return{path:t,id:n,weight:o,src:r,getFn:i}}function L(e){return y(e)?e:e.split(".")}function w(e){return y(e)?e.join("."):e}var x={useExtendedSearch:!1,getFn:function(e,t){var n=[],r=!1;return function e(t,o,i){if(b(t))if(o[i]){var s=t[o[i]];if(!b(s))return;if(i===o.length-1&&(g(s)||p(s)||function(e){return!0===e||!1===e||function(e){return m(e)&&null!==e}(e)&&"[object Boolean]"==E(e)}(s)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-v?"-0":t}(e)}(s));else if(y(s)){r=!0;for(var a=0,c=s.length;a<c;a+=1)e(s[a],o,i+1)}else o.length&&e(s,o,i+1)}else n.push(t)}(e,g(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},M=t(t(t(t({},{isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),x),B=/[^ ]+/g,F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getFn,o=void 0===n?M.getFn:n,i=t.fieldNormWeight,s=void 0===i?M.fieldNormWeight:i;r(this,e),this.norm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=new Map,r=Math.pow(10,t);return{get:function(t){var o=t.match(B).length;if(n.has(o))return n.get(o);var i=1/Math.pow(o,.5*e),s=parseFloat(Math.round(i*r)/r);return n.set(o,s),s},clear:function(){n.clear()}}}(s,3),this.getFn=o,this.isCreated=!1,this.setIndexRecords()}return i(e,[{key:"setSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}},{key:"setIndexRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}},{key:"setKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=t,this._keysMap={},t.forEach(function(t,n){e._keysMap[t.id]=n})}},{key:"create",value:function(){var e=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,g(this.docs[0])?this.docs.forEach(function(t,n){e._addString(t,n)}):this.docs.forEach(function(t,n){e._addObject(t,n)}),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();g(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}},{key:"getValueForItemAtKeyId",value:function(e,t){return e[this._keysMap[t]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){if(b(e)&&!A(e)){var n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}}},{key:"_addObject",value:function(e,t){var n=this,r={i:t,$:{}};this.keys.forEach(function(t,o){var i=t.getFn?t.getFn(e):n.getFn(e,t.path);if(b(i))if(y(i)){for(var s=[],a=[{nestedArrIndex:-1,value:i}];a.length;){var c=a.pop(),u=c.nestedArrIndex,l=c.value;if(b(l))if(g(l)&&!A(l)){var d={v:l,i:u,n:n.norm.get(l)};s.push(d)}else y(l)&&l.forEach(function(e,t){a.push({nestedArrIndex:t,value:e})})}r.$[o]=s}else if(g(i)&&!A(i)){var h={v:i,n:n.norm.get(i)};r.$[o]=h}}),this.records.push(r)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),e}();function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.getFn,o=void 0===r?M.getFn:r,i=n.fieldNormWeight,s=void 0===i?M.fieldNormWeight:i,a=new F({getFn:o,fieldNormWeight:s});return a.setKeys(e.map(S)),a.setSources(t),a.create(),a}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.errors,r=void 0===n?0:n,o=t.currentLocation,i=void 0===o?0:o,s=t.expectedLocation,a=void 0===s?0:s,c=t.distance,u=void 0===c?M.distance:c,l=t.ignoreLocation,d=void 0===l?M.ignoreLocation:l,h=r/e.length;if(d)return h;var f=Math.abs(a-i);return u?h+f/u:f?1:h}var j=32;function q(e){for(var t={},n=0,r=e.length;n<r;n+=1){var o=e.charAt(n);t[o]=(t[o]||0)|1<<r-n-1}return t}var I=String.prototype.normalize?function(e){return e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")}:function(e){return e},_=function(){function e(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.location,s=void 0===i?M.location:i,a=o.threshold,c=void 0===a?M.threshold:a,u=o.distance,l=void 0===u?M.distance:u,d=o.includeMatches,h=void 0===d?M.includeMatches:d,f=o.findAllMatches,y=void 0===f?M.findAllMatches:f,v=o.minMatchCharLength,g=void 0===v?M.minMatchCharLength:v,p=o.isCaseSensitive,m=void 0===p?M.isCaseSensitive:p,b=o.ignoreDiacritics,A=void 0===b?M.ignoreDiacritics:b,E=o.ignoreLocation,k=void 0===E?M.ignoreLocation:E;if(r(this,e),this.options={location:s,threshold:c,distance:l,includeMatches:h,findAllMatches:y,minMatchCharLength:g,isCaseSensitive:m,ignoreDiacritics:A,ignoreLocation:k},t=m?t:t.toLowerCase(),t=A?I(t):t,this.pattern=t,this.chunks=[],this.pattern.length){var C=function(e,t){n.chunks.push({pattern:e,alphabet:q(e),startIndex:t})},S=this.pattern.length;if(S>j){for(var L=0,w=S%j,x=S-w;L<x;)C(this.pattern.substr(L,j),L),L+=j;if(w){var B=S-j;C(this.pattern.substr(B),B)}}else C(this.pattern,0)}}return i(e,[{key:"searchIn",value:function(e){var t=this.options,n=t.isCaseSensitive,r=t.ignoreDiacritics,o=t.includeMatches;if(e=n?e:e.toLowerCase(),e=r?I(e):e,this.pattern===e){var i={isMatch:!0,score:0};return o&&(i.indices=[[0,e.length-1]]),i}var s=this.options,a=s.location,c=s.distance,u=s.threshold,l=s.findAllMatches,h=s.minMatchCharLength,f=s.ignoreLocation,y=[],v=0,g=!1;this.chunks.forEach(function(t){var n=t.pattern,r=t.alphabet,i=t.startIndex,s=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.location,i=void 0===o?M.location:o,s=r.distance,a=void 0===s?M.distance:s,c=r.threshold,u=void 0===c?M.threshold:c,l=r.findAllMatches,d=void 0===l?M.findAllMatches:l,h=r.minMatchCharLength,f=void 0===h?M.minMatchCharLength:h,y=r.includeMatches,v=void 0===y?M.includeMatches:y,g=r.ignoreLocation,p=void 0===g?M.ignoreLocation:g;if(t.length>j)throw new Error("Pattern length exceeds max of ".concat(j,"."));for(var m,b=t.length,A=e.length,E=Math.max(0,Math.min(i,A)),k=u,C=E,S=f>1||v,L=S?Array(A):[];(m=e.indexOf(t,C))>-1;){var w=$(t,{currentLocation:m,expectedLocation:E,distance:a,ignoreLocation:p});if(k=Math.min(w,k),C=m+b,S)for(var x=0;x<b;)L[m+x]=1,x+=1}C=-1;for(var B=[],F=1,D=b+A,q=1<<b-1,I=0;I<b;I+=1){for(var _=0,O=D;_<O;)$(t,{errors:I,currentLocation:E+O,expectedLocation:E,distance:a,ignoreLocation:p})<=k?_=O:D=O,O=Math.floor((D-_)/2+_);D=O;var R=Math.max(1,E-O+1),P=d?A:Math.min(E+O,A)+b,N=Array(P+2);N[P+1]=(1<<I)-1;for(var T=P;T>=R;T-=1){var W=T-1,z=n[e.charAt(W)];if(S&&(L[W]=+!!z),N[T]=(N[T+1]<<1|1)&z,I&&(N[T]|=(B[T+1]|B[T])<<1|1|B[T+1]),N[T]&q&&(F=$(t,{errors:I,currentLocation:W,expectedLocation:E,distance:a,ignoreLocation:p}))<=k){if(k=F,(C=W)<=E)break;R=Math.max(1,2*E-C)}}if($(t,{errors:I+1,currentLocation:E,expectedLocation:E,distance:a,ignoreLocation:p})>k)break;B=N}var H={isMatch:C>=0,score:Math.max(.001,F)};if(S){var K=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.minMatchCharLength,n=[],r=-1,o=-1,i=0,s=e.length;i<s;i+=1){var a=e[i];a&&-1===r?r=i:a||-1===r||((o=i-1)-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}(L,f);K.length?v&&(H.indices=K):H.isMatch=!1}return H}(e,n,r,{location:a+i,distance:c,threshold:u,findAllMatches:l,minMatchCharLength:h,includeMatches:o,ignoreLocation:f}),p=s.isMatch,m=s.score,b=s.indices;p&&(g=!0),v+=m,p&&b&&(y=[].concat(d(y),d(b)))});var p={isMatch:g,score:g?v/this.chunks.length:1};return g&&o&&(p.indices=y),p}}]),e}(),O=function(){function e(t){r(this,e),this.pattern=t}return i(e,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(e){return R(e,this.multiRegex)}},{key:"isSingleMatch",value:function(e){return R(e,this.singleRegex)}}]),e}();function R(e,t){var n=e.match(t);return n?n[1]:null}var P=function(e){a(n,e);var t=l(n);function n(e){return r(this,n),t.call(this,e)}return i(n,[{key:"search",value:function(e){var t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),n}(O),N=function(e){a(n,e);var t=l(n);function n(e){return r(this,n),t.call(this,e)}return i(n,[{key:"search",value:function(e){var t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),n}(O),T=function(e){a(n,e);var t=l(n);function n(e){return r(this,n),t.call(this,e)}return i(n,[{key:"search",value:function(e){var t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),n}(O),W=function(e){a(n,e);var t=l(n);function n(e){return r(this,n),t.call(this,e)}return i(n,[{key:"search",value:function(e){var t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),n}(O),z=function(e){a(n,e);var t=l(n);function n(e){return r(this,n),t.call(this,e)}return i(n,[{key:"search",value:function(e){var t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),n}(O),H=function(e){a(n,e);var t=l(n);function n(e){return r(this,n),t.call(this,e)}return i(n,[{key:"search",value:function(e){var t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),n}(O),K=function(e){a(n,e);var t=l(n);function n(e){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.location,a=void 0===s?M.location:s,c=i.threshold,u=void 0===c?M.threshold:c,l=i.distance,d=void 0===l?M.distance:l,h=i.includeMatches,f=void 0===h?M.includeMatches:h,y=i.findAllMatches,v=void 0===y?M.findAllMatches:y,g=i.minMatchCharLength,p=void 0===g?M.minMatchCharLength:g,m=i.isCaseSensitive,b=void 0===m?M.isCaseSensitive:m,A=i.ignoreDiacritics,E=void 0===A?M.ignoreDiacritics:A,k=i.ignoreLocation,C=void 0===k?M.ignoreLocation:k;return r(this,n),(o=t.call(this,e))._bitapSearch=new _(e,{location:a,threshold:u,distance:d,includeMatches:f,findAllMatches:v,minMatchCharLength:p,isCaseSensitive:b,ignoreDiacritics:E,ignoreLocation:C}),o}return i(n,[{key:"search",value:function(e){return this._bitapSearch.searchIn(e)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),n}(O),U=function(e){a(n,e);var t=l(n);function n(e){return r(this,n),t.call(this,e)}return i(n,[{key:"search",value:function(e){for(var t,n=0,r=[],o=this.pattern.length;(t=e.indexOf(this.pattern,n))>-1;)n=t+o,r.push([t,n-1]);var i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),n}(O),G=[P,U,T,W,H,z,N,K],J=G.length,V=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Q=new Set([K.type,U.type]),X=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.isCaseSensitive,i=void 0===o?M.isCaseSensitive:o,s=n.ignoreDiacritics,a=void 0===s?M.ignoreDiacritics:s,c=n.includeMatches,u=void 0===c?M.includeMatches:c,l=n.minMatchCharLength,d=void 0===l?M.minMatchCharLength:l,h=n.ignoreLocation,f=void 0===h?M.ignoreLocation:h,y=n.findAllMatches,v=void 0===y?M.findAllMatches:y,g=n.location,p=void 0===g?M.location:g,m=n.threshold,b=void 0===m?M.threshold:m,A=n.distance,E=void 0===A?M.distance:A;r(this,e),this.query=null,this.options={isCaseSensitive:i,ignoreDiacritics:a,includeMatches:u,minMatchCharLength:d,findAllMatches:v,ignoreLocation:f,location:p,threshold:b,distance:E},t=i?t:t.toLowerCase(),t=a?I(t):t,this.pattern=t,this.query=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map(function(e){for(var n=e.trim().split(V).filter(function(e){return e&&!!e.trim()}),r=[],o=0,i=n.length;o<i;o+=1){for(var s=n[o],a=!1,c=-1;!a&&++c<J;){var u=G[c],l=u.isMultiMatch(s);l&&(r.push(new u(l,t)),a=!0)}if(!a)for(c=-1;++c<J;){var d=G[c],h=d.isSingleMatch(s);if(h){r.push(new d(h,t));break}}}return r})}(this.pattern,this.options)}return i(e,[{key:"searchIn",value:function(e){var t=this.query;if(!t)return{isMatch:!1,score:1};var n=this.options,r=n.includeMatches,o=n.isCaseSensitive,i=n.ignoreDiacritics;e=o?e:e.toLowerCase(),e=i?I(e):e;for(var s=0,a=[],c=0,u=0,l=t.length;u<l;u+=1){var h=t[u];a.length=0,s=0;for(var f=0,y=h.length;f<y;f+=1){var v=h[f],g=v.search(e),p=g.isMatch,m=g.indices,b=g.score;if(!p){c=0,s=0,a.length=0;break}if(s+=1,c+=b,r){var A=v.constructor.type;Q.has(A)?a=[].concat(d(a),d(m)):a.push(m)}}if(s){var E={isMatch:!0,score:c/s};return r&&(E.indices=a),E}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(e,t){return t.useExtendedSearch}}]),e}(),Y=[];function Z(e,t){for(var n=0,r=Y.length;n<r;n+=1){var o=Y[n];if(o.condition(e,t))return new o(e,t)}return new _(e,t)}var ee="$and",te="$path",ne=function(e){return!(!e[ee]&&!e.$or)},re=function(e){return s({},ee,Object.keys(e).map(function(t){return s({},t,e[t])}))};function oe(e,t){var n=e.matches;t.matches=[],b(n)&&n.forEach(function(e){if(b(e.indices)&&e.indices.length){var n={indices:e.indices,value:e.value};e.key&&(n.key=e.key.src),e.idx>-1&&(n.refIndex=e.idx),t.matches.push(n)}})}function ie(e,t){t.score=e.score}var se=function(){function e(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;r(this,e),this.options=t(t({},M),o),this.options.useExtendedSearch,this._keyStore=new C(this.options.keys),this.setCollection(n,i)}return i(e,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof F))throw new Error("Incorrect 'index' type");this._myIndex=t||D(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function(e){b(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"remove",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1},t=[],n=0,r=this._docs.length;n<r;n+=1){var o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,r-=1,t.push(o))}return t}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).limit,n=void 0===t?-1:t,r=this.options,o=r.includeMatches,i=r.includeScore,s=r.shouldSort,a=r.sortFn,c=r.ignoreFieldNorm,u=g(e)?g(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){var n=t.ignoreFieldNorm,r=void 0===n?M.ignoreFieldNorm:n;e.forEach(function(e){var t=1;e.matches.forEach(function(e){var n=e.key,o=e.norm,i=e.score,s=n?n.weight:null;t*=Math.pow(0===i&&s?Number.EPSILON:i,(s||1)*(r?1:o))}),e.score=t})}(u,{ignoreFieldNorm:c}),s&&u.sort(a),p(n)&&n>-1&&(u=u.slice(0,n)),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.includeMatches,o=void 0===r?M.includeMatches:r,i=n.includeScore,s=void 0===i?M.includeScore:i,a=[];return o&&a.push(oe),s&&a.push(ie),e.map(function(e){var n=e.idx,r={item:t[n],refIndex:n};return a.length&&a.forEach(function(t){t(e,r)}),r})}(u,this._docs,{includeMatches:o,includeScore:i})}},{key:"_searchStringList",value:function(e){var t=Z(e,this.options),n=this._myIndex.records,r=[];return n.forEach(function(e){var n=e.v,o=e.i,i=e.n;if(b(n)){var s=t.searchIn(n),a=s.isMatch,c=s.score,u=s.indices;a&&r.push({item:n,idx:o,matches:[{score:c,value:n,norm:i,indices:u}]})}}),r}},{key:"_searchLogical",value:function(e){var t=this,n=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).auto,r=void 0===n||n;return ne(e)||(e=re(e)),function e(n){var o=Object.keys(n),i=function(e){return!!e[te]}(n);if(!i&&o.length>1&&!ne(n))return e(re(n));if(function(e){return!y(e)&&m(e)&&!ne(e)}(n)){var s=i?n[te]:o[0],a=i?n.$val:n[s];if(!g(a))throw new Error(function(e){return"Invalid value for key ".concat(e)}(s));var c={keyId:w(s),pattern:a};return r&&(c.searcher=Z(a,t)),c}var u={children:[],operator:o[0]};return o.forEach(function(t){var r=n[t];y(r)&&r.forEach(function(t){u.children.push(e(t))})}),u}(e)}(e,this.options),r=function e(n,r,o){if(!n.children){var i=n.keyId,s=n.searcher,a=t._findMatches({key:t._keyStore.get(i),value:t._myIndex.getValueForItemAtKeyId(r,i),searcher:s});return a&&a.length?[{idx:o,item:r,matches:a}]:[]}for(var c=[],u=0,l=n.children.length;u<l;u+=1){var h=e(n.children[u],r,o);if(h.length)c.push.apply(c,d(h));else if(n.operator===ee)return[]}return c},o=this._myIndex.records,i={},s=[];return o.forEach(function(e){var t=e.$,o=e.i;if(b(t)){var a=r(n,t,o);a.length&&(i[o]||(i[o]={idx:o,item:t,matches:[]},s.push(i[o])),a.forEach(function(e){var t,n=e.matches;(t=i[o].matches).push.apply(t,d(n))}))}}),s}},{key:"_searchObjectList",value:function(e){var t=this,n=Z(e,this.options),r=this._myIndex,o=r.keys,i=r.records,s=[];return i.forEach(function(e){var r=e.$,i=e.i;if(b(r)){var a=[];o.forEach(function(e,o){a.push.apply(a,d(t._findMatches({key:e,value:r[o],searcher:n})))}),a.length&&s.push({idx:i,item:r,matches:a})}}),s}},{key:"_findMatches",value:function(e){var t=e.key,n=e.value,r=e.searcher;if(!b(n))return[];var o=[];if(y(n))n.forEach(function(e){var n=e.v,i=e.i,s=e.n;if(b(n)){var a=r.searchIn(n),c=a.isMatch,u=a.score,l=a.indices;c&&o.push({score:u,key:t,value:n,idx:i,norm:s,indices:l})}});else{var i=n.v,s=n.n,a=r.searchIn(i),c=a.isMatch,u=a.score,l=a.indices;c&&o.push({score:u,key:t,value:i,norm:s,indices:l})}return o}}]),e}();return se.version="7.1.0",se.createIndex=D,se.parseIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getFn,r=void 0===n?M.getFn:n,o=t.fieldNormWeight,i=void 0===o?M.fieldNormWeight:o,s=e.keys,a=e.records,c=new F({getFn:r,fieldNormWeight:i});return c.setKeys(s),c.setIndexRecords(a),c},se.config=M,function(){Y.push.apply(Y,arguments)}(X),se},e.exports=t()}},t={};!function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(479),document.addEventListener("htmx:afterSwap",async e=>{if(U(),"more"!==o){B.clear(),j=new $,T();const{primaryContainer:e,secondaryContainer:t}=await ee();await ue.init(o,s,{primaryContainer:e,secondaryContainer:t})}else await se(),await ue.init(o,s)}),document.addEventListener("htmx:beforeRequest",e=>{const t=e.detail.elt?.id;t===o?e.preventDefault():a||t!==i&&"more"!==t&&(F.clear(),c=!0)}),document.querySelector("nav").addEventListener("click",e=>{const t=e.target.closest("a");if(t&&t.id){const e=t.id;if(e===o)return;document.querySelector(`nav a[id=${o}]`)?.classList.remove("active"),document.getElementById("content").setAttribute("data-mode",e),t.classList.add("active"),o=e}});let n,r,o=document.getElementById("content").getAttribute("data-mode")||"offense",i=null,s=localStorage.getItem("selectedGen")||"6+",a=!1,c=!0,u=null,l=null,d=null,h=null,f=null,y="",v="",g=!1;const p=new Set(["normal"]),m=new Set([]),b=["normal","fire","water","electric","grass","ice","fighting","poison","ground","flying","psychic","bug","rock","ghost","dragon","dark","steel","fairy","stellar"],A=Object.fromEntries(b.map((e,t)=>[e,t])),E=["flash-fire-atk","scrappy","tinted-lens","flying-press","freeze-dry","thousand-arrows","water-bubble-atk","flash-fire-def","levitate","lightning-rod","thick-fat","volt-absorb","water-absorb","wonder-guard","dry-skin","filter","heatproof","motor-drive","storm-drain","sap-sipper","delta-stream","fluffy","water-bubble-def","earth-eater","purifying-salt","tera-shell","well-baked-body","forests-curse","trick-or-treat"],k=Object.fromEntries(E.map((e,t)=>[e,t])),C={"flying-press":"fighting","freeze-dry":"ice","thousand-arrows":"ground"},S={grass:"forests-curse",ghost:"trick-or-treat"},L=new Map,w=new Map,x={1:15,"2-5":17,"6+":19},M={1:1,"2-5":5,"6+":1/0},B=new Map,F=new Map;class D{constructor(e){this.mult=e,this.next=null}}class ${constructor(){this.head=null}insert(e){let t=new D(e);if(!this.head||this.head.mult<e)return t.next=this.head,this.head=t,t;let n=this.head;for(;n.next&&n.next.mult>e;)n=n.next;return n.next&&n.next.mult===e?n.next:(t.next=n.next,n.next=t,t)}find(e){let t=this.head;for(;t;){if(t.mult===e)return t;t=t.next}return null}}let j=new $;const q=(e,t)=>{B.has(e)||(B.set(e,new Set),j.insert(e)),B.get(e).add(t)},I={};let _=null;const O={offense:{},defense:{}},R=async()=>{if(_)return _;try{const e=await fetch("/json/exceptions.json");if(!e.ok)throw new Error("Failed to fetch data for exceptions.");const t=await e.json();return _=t,t}catch(e){return console.error("Error loading exceptions data:",e),{}}},P=async e=>{if(O.defense[e])return O.defense[e];const t={1:"/json/gen1_mon_search.json","2-5":"/json/gen2-5_mon_search.json","6+":"/json/gen6+_mon_search.json"};try{const n=await fetch(t[e]);if(!n.ok)throw new Error(`Failed to load Pokémon search data for gen ${e}`);const r=await n.json();return O.defense[e]=r,r}catch(e){return console.error("Error loading Pokemon saerch data:",e),[]}},N=async e=>{if(O.offense[e])return O.offense[e];const t={1:"/json/gen1_move_search.json","2-5":"/json/gen2-5_move_search.json","6+":"/json/gen6+_move_search.json"};try{const n=await fetch(t[e]);if(!n.ok)throw new Error(`Failed to load move search data for gen ${e}`);const r=await n.json();return O.offense[e]=r,r}catch(e){return console.error("Error loading move search data:",e),[]}};(async()=>{await(async()=>{r=await R();const e=r.e;for(let t=0;t<e.length;t++){const n=e[t];if(!n.move)continue;const r=n.move,o=E[t];L.set(r,o),w.set(o,r)}})()})();const T=()=>{const e=document.querySelector(".primary-types"),t=document.querySelector(".secondary-types"),n=e.querySelector(".button-grid").children;for(let e=15;e<n.length;e++)n[e].style.display=x[s]>e?"block":"none";if(t){const e=t.querySelector(".button-grid").children;for(let t=15;t<e.length;t++)e[t].style.display=x[s]>t?"block":"none"}},W=(e,t)=>{e.querySelectorAll("button.selected").forEach(e=>{const n=e.dataset.type;t.has(n)&&(t.delete(n),e.classList.remove("selected"))})},z=(e,t,n,r=!1)=>{e.querySelector(`button[data-type="${n}"]`).disabled=!0,r?(f=t.querySelector(`button[data-type="${n}"]`),f.disabled=!0):(h=t.querySelector(`button[data-type="${n}"]`),h.disabled=!0)},H=(e,t,n,r=!1)=>{e.querySelector(`button[data-type="${n}"]`).disabled=!1,r?(f.disabled=!1,f=null):(h.dataset.type!==n&&(h.disabled=!1),h=null)},K=(e,t)=>{const n=document.querySelector(".result-groups");let r=document.getElementById(`${e}`);if(!r){r=document.createElement("div"),r.classList.add("result-group"),r.id=`${e}`;const t=document.createElement("h3");t.textContent="offense"===o?`Deals ${e}x to`:`Takes ${e}x from`;const i=document.createElement("ul");r.appendChild(t),r.appendChild(i);const s=n.firstChild;if(s&&parseFloat(s.id)<e)n.insertBefore(r,s);else{let t=j.find(e),o=null;for(;t&&t.next&&(o=document.getElementById(`${t.next.mult}`),!o);)t=t.next;o?n.insertBefore(r,o):n.appendChild(r)}}const i=r.querySelector("ul");i.innerHTML="",t.forEach(e=>{if(null!==e){const t=document.createElement("li");"tera_pokemon"!==e?(t.textContent=e.charAt(0).toUpperCase()+e.slice(1),t.setAttribute("data-type",e),i.classList.remove("tera-list")):(t.textContent="Tera Pokemon",t.setAttribute("data-type","tera"),t.classList.add("tera-item"),i.classList.add("tera-list")),i.appendChild(t)}}),r.style.display=t.size>0?"grid":"none"},U=()=>{let e=document.getElementById("gen");e&&(e.textContent=s)},G=(e,t,o,i)=>{B.forEach(e=>e.clear());const s=x[o],a=new Map,c=[];if(i.size>0)for(const e of i){const t=k[e],n=r.e[t];if(1!==n.after){if(n.targets){if(n.targets.any)for(const e of Object.keys(n.targets.any))a.set(`any,${parseInt(e,10)}`,n);for(const[e,t]of Object.entries(n.targets))for(const r of Object.keys(t))a.set(`${parseInt(e,10)},${parseInt(r,10)}`,n)}}else c.push(n)}for(let r=0;r<s;r++){let o,i=1,s=!1;for(const c of e){o=A[c],18===o&&(s=!0),i*="offense"===t?n.s[o][r]:n.s[r][o];let e=a.get(`${o},${r}`),u=null;if("offense"!==t&&a.has(`any,${r}`)&&(u=a.get(`any,${r}`)),e&&(i=1===e.replace?e.mult:i*e.mult),u){const e=u.targets.any[r.toString()];i=e?1===e.replace?e.mult:i*e.mult:1===u.replace?u.mult:i*u.mult}}for(const e of c)e.group?e.replace?i=e.mult:i*=e.mult:0!==i&&(i=e.mult);let u=null;18===r?s?u="defense"!==t?"tera_pokemon":b[r]:"offense"!==t&&(u=b[r]):u=b[r],q(i,u)}return B},J=(e,t,n)=>{const r=e.dataset.type;if(e)if(p.has(r)){if(l?.dataset.type!==r)return;p.clear(),p.add(r),u.classList.remove("selected"),l?.classList.remove("selected"),e.classList.add("selected"),u=e,h.disabled=!1,h=n.querySelector(`button[data-type="${r}"]`),h.disabled=!0}else n?(p.forEach(e=>{t.querySelector(`button[data-type="${e}"].selected`)&&p.delete(e)}),h&&(h.disabled=!1),h=n.querySelector(`button[data-type="${r}"]`),h.disabled=!0):p.clear(),u.classList.remove("selected"),p.add(r),e.classList.add("selected"),u=e},V=(e,t,n,r=!1)=>{if(!e)return;const o=e.dataset.type;if(u.getAttribute("data-type")===o&&(console.log(`${o} is primary.`),W(n,p),console.log(`Skipping secondary ${o} addition.`),te(t,n)),p.has(o)&&e.classList.contains("selected")){if(r)return;p.delete(o),e.classList.remove("selected"),l=null}else W(n,p),p.add(o),e.classList.add("selected"),l=e},Q=(e,t,n,r)=>{const o=[...n.querySelectorAll("button"),...r.querySelectorAll("button")],i=document.getElementById("tera-select");if("dMove"===e){const e=t,o=t.dataset.move,s=w.get(o);let a,c;if(m.has(o)){let e;if(m.delete(o),d){const t=d.dataset.move;e=w.get(t),a=n.querySelector(`button[data-type=${e}]`),c=r.querySelector(`button[data-type=${e}]`),d.classList.remove("selected"),d=null;const o=i.querySelector(`option[value="${e}"]`);o&&(o.disabled=!1)}u?.dataset.type!==s&&l?.dataset.type!==s&&p.delete(s),g||!0!==a.disabled||!0!==c.disabled||H(n,0,e,!0)}else{if(d){const e=d.dataset.move;lastType=w.get(e),a=n.querySelector(`button[data-type=${lastType}]`),c=r.querySelector(`button[data-type=${lastType}]`),m.delete(e),d.classList.remove("selected"),p.has(lastType)&&(p.delete(lastType),g||!0!==a.disabled||!0!==c.disabled||H(n,0,lastType,!0));const t=i.querySelector(`option[value="${lastType}"]`);t&&(t.disabled=!1)}const t=i.querySelector(`option[value="${s}"]`);t&&(t.disabled=!0),m.add(o),d=e,u?.dataset.type!==s&&l?.dataset.type!==s&&p.add(s),d.classList.add("selected"),z(n,r,s,!0)}}else{const e=t;if(d&&e===w.get(d.dataset.move))return void console.log(`selectedType has the same type as ${d.dataset.move}, so the selection did not succeed.`);if(""!==e){if(l&&(p.delete(l.dataset.type),l.classList.remove("selected"),l=null),o.forEach(e=>{e.disabled=!0}),e!==u.dataset.type){if(p.delete(u.dataset.type),u.classList.remove("selected"),d){const t=w.get(d.dataset.move);for(let n of p)n!==t&&n!==e&&"stellar"!==n&&p.delete(n)}p.add(e),u=n.querySelector(`button[data-type=${e}]`),u.classList.add("selected")}g||p.add("stellar"),g=!0}else{if(o.forEach(e=>e.disabled=!1),d){const e=w.get(d.dataset.move);z(n,r,e,!0)}g&&p.delete("stellar"),g=!1}}te(n,r)},X=(e,t)=>t&&S[e.dataset.type]===t,Y=(e,t,n,r=null)=>{switch(e){case"primary":J(t,n,r);break;case"secondary":V(t,n,r);break;case"oException":((e,t)=>{const n=[...t.querySelectorAll("button")],r=e.dataset.move;if(m.has(r))m.delete(r),e.classList.remove("selected"),d=null,"flying-press"===r&&p.delete("flying"),n.forEach(e=>e.disabled=!1);else{if(d){const e=d.dataset.move;m.delete(e),d.classList.remove("selected")}m.add(r),e.classList.add("selected"),d=e;const o=w.get(r);p.clear(),p.add(o),"flying-press"===r&&p.add("flying"),u?.classList.remove("selected");const i=t.querySelector(`button[data-type="${o}"]`);i&&(i.classList.add("selected"),u=i),n.forEach(e=>e.disabled=!0)}te(t)})(t,n);break;case"dMove":case"dTera":Q(e,t,n,r);break;case"mSearch":((e,t,n)=>{J(e,t,n)})(t,n,r);break;case"pSearch":((e,t,n)=>{const r=d?d.getAttribute("data-move"):null;g&&(document.getElementById("tera-select").value="",Q("dTera","",t,n)),X(e.primary,r)&&Q("dMove",d,t,n),J(e.primary,t,n),e.secondary?(X(e.secondary,r)&&Q("dMove",d,t,n),V(e.secondary,t,n,!0)):l&&V(l,t,n)})(t,n,r);break;default:return void console.warn(`Unknown source: ${e}`)}te(n,r)},Z=(e,t=null)=>{document.getElementById("reset-button").addEventListener("click",()=>{let n;window.scrollTo(0,0),p.clear(),m.clear(),d&&d.classList.remove("selected"),t?(document.querySelector(".selectable-d").querySelectorAll("button:disabled").forEach(e=>e.disabled=!1),n=document.getElementById("def-ability-select"),n.value="",v="","6+"===s&&g&&(document.getElementById("tera-select").value="",g=null),l&&(l.classList.remove("selected"),l=null)):(document.querySelector(".selectable-o").querySelectorAll("button:disabled").forEach(e=>e.disabled=!1),n=document.getElementById("atk-ability-select"),n.value="",y="");const r=e.querySelector('button[data-type="normal"');Y("primary",r,e,t)})},ee=async()=>{n=await(async e=>{if(I[e])return I[e];const t={1:"/json/gen1.json","2-5":"/json/gen2-5.json","6+":"/json/gen6+.json"};try{const n=await fetch(t[e]);if(!n.ok)throw new Error(`Failed to fetch data for generation ${e}.`);const r=await n.json();return I[e]=r,r}catch(e){return console.error("Error loading generation data:",e),{}}})(s),r=await R();const e=document.querySelector(".primary-types"),t=document.querySelector(".secondary-types");return ne(e,t),a||o!==i?(p.clear(),p.add("normal"),e.querySelector('button[data-type="normal"]').classList.add("selected"),h=t?.querySelector('button[data-type="normal"]'),h&&(h.disabled=!0),m.clear()):"defense"===o?await re(e,t):await re(e),a=!1,i=o,u=e.querySelector("button.selected"),l=t?.querySelector("button.selected"),"defense"===o?(ie(e,t),Z(e,t)):(oe(e),Z(e)),te(e,t),{primaryContainer:e,secondaryContainer:t}},te=(e,t=null)=>(((e,t,n,r)=>{var o;o=G([...e],t,n,r),c?o.forEach((e,t)=>{var n,r;F.has(t)&&(n=e,r=F.get(t),n.size===r.size&&[...n].every(e=>r.has(e)))||(F.set(t,new Set(e)),K(t,e))}):o.forEach((e,t)=>{F.set(t,new Set(e)),K(t,e)})})(p,o,s,m),((e,t=null)=>{if(u=e.querySelector("button.selected"),l=t?.querySelector("button.selected"),"defense"===o){const e=u?.dataset.type,t=l?.dataset.type;((e,t)=>{let n,r;S[e]&&(n=L.get(e)),S[t]&&(r=L.get(t)),n&&(document.querySelector(`button[data-move="${n}"]`).disabled=!0),r&&(document.querySelector(`button[data-move="${r}"]`).disabled=!0),document.querySelectorAll("button[data-move]").forEach(e=>{const t=e.dataset.move;t!==n&&t!==r&&(e.disabled=!1)})})(e,t)}})(e,t)),ne=(e,t)=>{e.addEventListener("click",async n=>{const r=n.target.closest("button");r&&r.dataset.type&&Y("primary",r,e,t)}),t?.addEventListener("click",async n=>{const r=n.target.closest("button");r&&r.dataset.type&&Y("secondary",r,e,t)})},re=async(e,t=null)=>{if(m.size>0){let e,t;"defense"===o?(e=document.getElementById("def-ability-select"),t=v):(e=document.getElementById("atk-ability-select"),t=y),m.has(t)&&(e.value=t)}if(t)for(const n of p){const r=L.get(n);if(r&&m.has(r))d=document.querySelector(`button[data-move="${r}"]`),d.classList.add("selected"),z(e,t,n,!0);else if(g&&"stellar"!==n)u=e.querySelector(`button[data-type="${n}"]`),u.classList.add("selected"),document.getElementById("tera-select").value=n,e.querySelectorAll("button").forEach(e=>{e.disabled=!0}),t.querySelectorAll("button").forEach(e=>{e.disabled=!0});else{const r=!u||u.dataset.type===n,o=r?e.querySelector(`button[data-type="${n}"]`):t.querySelector(`button[data-type="${n}"]`);if(!o)continue;o.classList.add("selected"),r&&(u=o,h=t.querySelector(`button[data-type="${n}"]`),h?.setAttribute("disabled",!0))}}else for(const t of p){const n=L.get(t);if(n&&m.has(n))u=e.querySelector(`button[data-type="${t}"]`),u.classList.add("selected"),d=document.querySelector(`button[data-move="${n}"]`),d.classList.add("selected"),e.querySelectorAll("button").forEach(e=>{e.disabled=!0});else if("flying"!==t){const n=e.querySelector(`button[data-type="${t}"]`);n?.classList.add("selected")}}},oe=e=>{const t=document.querySelector(".special-moves-o"),n=document.getElementById("atk-ability-select");t.addEventListener("click",async t=>{const n=t.target.closest("button");n&&n.dataset.move&&Y("oException",n,e)}),n.addEventListener("change",t=>{const n=t.target.value;n!==y&&(""!==y&&m.delete(y),""!==n&&m.add(n),y=n,te(e))}),d=t.querySelector("button.selected")||null},ie=(e,t)=>{const n=document.querySelector(".special-moves-d"),r=document.getElementById("def-ability-select"),o=document.getElementById("tera-select");"6+"!==s&&(document.querySelector(".tera-types").style.display="none"),n.addEventListener("click",async n=>{const r=n.target.closest("button");r&&r.dataset.move&&Y("dMove",r,e,t)}),r.addEventListener("change",n=>{const r=n.target.value;r!==v&&(""!==v&&m.delete(v),""!==r&&m.add(r),v=r,te(e,t))}),o.addEventListener("change",n=>{const r=n.target.value;Y("dTera",r,e,t),g=""!==r}),g=""!==o.value,d=n.querySelector("button.selected")||null},se=async()=>{const e=document.querySelector(".gen-selection");if(!e)return void console.log("Gen Selection container not found.");const t=e.querySelectorAll('input[type="radio"]'),n=e.querySelector(`input[type="radio"][data-gen="${s}"]`);n&&(n.checked=!0),c=!1,t.forEach(e=>{e.addEventListener("change",()=>{const t=e.dataset.gen;t!==s&&(a||(F.clear(),c=!0,i=null),a=!0,s=t,localStorage.setItem("selectedGen",s),U())})})},ae=(e,t)=>e.tc&&t<e.tc?e.o[0]:e.t[0],ce=(e,t)=>e.tc&&t<e.tc?e.o:e.t,ue=(()=>{let e=null,t=null,n=null,r=null,i=null,s=!1,a=null,c=null;const u=document.getElementById("search");if(!u)return void console.warn("Search input not found.");const l=t=>{t.target.value.length>30&&(t.target.value=t.target.value.slice(0,30));const r=e?.search(t.target.value)??[];"offense"===n?le.renderMoveResults(r,i):"defense"===n&&le.renderPokemonResults(r,i)};return{init:async(d,h,f={})=>{if("more"===d)return u.style.display="none",void le.clearResults();a=f.primaryContainer,c=f.secondaryContainer??null,u.style.display="block",u.placeholder="offense"===o?"Search by move name...":"Search by Pokémon name...",le.clearResults(),(()=>{if(s)u.value="",le.clearResults();else{u.addEventListener("input",l);const e=document.getElementById("search-backdrop");u.addEventListener("focus",()=>{e.classList.remove("hidden"),console.log("backdrop revealed")}),u.addEventListener("blur",()=>{le.isClickInProgress?.()||(e.classList.add("hidden"),le.clearResults())}),e.addEventListener("click",()=>{e.classList.add("hidden"),le.clearResults(),u.blur(),console.log("leaving search via backdrop click")}),s=!0}})(),((t,o)=>t!==n||o!==r||!e)(d,h)&&(t=await(async(e,t)=>{const n=O[e];if(n[t])return n[t];const r="offense"===e?N:P,o=(e=>{switch(e){case"1":default:return["1"];case"2-5":return["2-5","1"];case"6+":return["6+","2-5","1"]}})(t),i=(await Promise.all(o.map(r))).flat();return n[t]=i,i})(d,h),e=new Fuse(t,{keys:["n","d"],threshold:.3,ignoreLocation:!0})),n=d,r=h,i=M[r],le.initClickHandler(d,e=>{const n=t.find(t=>t.n===e);if(!n)return;const r=ae(n,i);((e,t)=>{if(C[e]){const t=document.querySelector(".special-moves-o").querySelector(`button[data-move="${e}"]`);if(!t)return;Y("oException",t,a)}else{const e=b[t],n=a.querySelector(`button[data-type="${e}"]`);if(!n)return;Y("primary",n,a)}})(e,r)},e=>{const n=t.find(t=>t.n===e);n&&((e,t)=>{const n=b[t[0]],r=t[1]?b[t[1]]:null,o=a.querySelector(`button[data-type="${n}"]`);if(!o)return;const i=r?c?.querySelector(`button[data-type="${r}"]`):null;Y("pSearch",{primary:o,secondary:i},a,c)})(0,ce(n,i))})}}})(),le=(()=>{let e=null,t=!1;const n=()=>document.getElementById("search-results"),r=()=>{const e=n();e&&(e.innerHTML="",e.classList.add("hidden"))};return(()=>{const o=n();if(o){let n=null;o.addEventListener("pointerdown",e=>{const r=e.target.closest(".search-result");r&&(n=r,r.classList.add("active")),t=!0}),o.addEventListener("pointermove",e=>{if(1===e.buttons){const t=e.target.closest(".search-result");t&&t!==n&&(n&&n.classList.remove("active"),n=t,t.classList.add("active"))}}),o.addEventListener("pointerleave",()=>{n&&(n.classList.remove("active"),n=null)}),o.addEventListener("pointerup",o=>{n&&(n.classList.remove("active"),n=null),(n=>{if(!e)return void console.warn("Click handler not configured");const o=n.target.closest(".search-result");if(!o)return;const i=o.dataset.name;e(i),r();const s=document.getElementById("search");s&&(s.value="",s.blur());const a=document.getElementById("search-backdrop");a&&a.classList.add("hidden"),t=!1})(o)})}})(),{isClickInProgress:()=>t,clearResults:r,initClickHandler:(t,n,r)=>{"offense"===t?e=e=>n(e):"defense"===t&&(e=e=>r(e))},renderMoveResults:(e=[],t)=>{const o=n();if(!o)return;if(!e.length)return r();const i=e.slice(0,10).map(({item:e})=>{const n=ae(e,t),r=b[n];return`\n      <div class="search-result" data-name="${e.n}">\n        <h1>${e.d}</h1>\n        <div class="search-typing">\n          <svg class="icon" data-type="${r}">\n            <use href="/svg/types-min.svg#${r}"></use>\n          </svg>\n        </div>\n      </div>\n    `}).join("");o.innerHTML=i,o.classList.remove("hidden")},renderPokemonResults:(e=[],t)=>{const o=n();if(!o)return;if(!e.length)return r();const i=e.slice(0,10).map(({item:e})=>{const n=ce(e,t),r=n.map(e=>{const t=b[e];return`\n          <svg class="icon" data-type="${t}">\n            <use href="/svg/types-min.svg#${t}"></use>\n          </svg>\n        `}).join(""),o=1===n.length?"mono":"dual";return`\n      <div class="search-result" data-name="${e.n}">\n        <h1>${e.d}</h1>\n        <div class="search-typing ${o}">\n          ${r}\n        </div>\n      </div>\n    `}).join("");o.innerHTML=i,o.classList.remove("hidden")}}})()})();